---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const articles = await getCollection('blog');
const sortedArticles = articles.sort((a, b) => 
  b.data.publishDate.getTime() - a.data.publishDate.getTime()
);
---

<BaseLayout title="Blog - Mackenzie" description="Articles, tutorials, and insights on web development">
  <main class="min-h-screen pt-32 pb-20">
    <div class="max-w-7xl mx-auto px-6">
      <!-- Page Header -->
      <div class="text-center mb-16">
        <p class="text-text-secondary text-sm mb-4 font-medium tracking-wider">... /Blog ...</p>
        <h1 class="text-6xl lg:text-7xl font-display mb-6 gradient-text">Articles & Tutorials</h1>
        <p class="text-text-secondary text-lg max-w-2xl mx-auto leading-relaxed">
          Thoughts, tutorials, and insights on web development, programming, and technology
        </p>
      </div>

      {sortedArticles.length === 0 ? (
        <!-- Empty State -->
        <div class="text-center py-20">
          <div class="glass rounded-3xl p-12 max-w-md mx-auto">
            <i class="fa-solid fa-newspaper text-6xl text-text-secondary/30 mb-6"></i>
            <h3 class="text-2xl font-display mb-4">No Articles Yet</h3>
            <p class="text-text-secondary">
              Check back soon for new articles and tutorials on web development.
            </p>
          </div>
        </div>
      ) : (
        <!-- Articles Grid -->
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
          {sortedArticles.map((article, index) => (
            <article 
              class="article-card glass rounded-3xl p-8 glass-hover border border-white/10 hover:border-secondary/50 transition-all duration-500 group"
              style={`animation-delay: ${index * 0.1}s;`}
            >
              <div class="flex items-center justify-between mb-4">
                <span class="px-3 py-1 bg-secondary/10 text-secondary rounded-full text-xs border border-secondary/20">
                  Tutorial
                </span>
                <time class="text-xs text-text-secondary">
                  {article.data.publishDate.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric' 
                  })}
                </time>
              </div>

              <h3 class="text-2xl font-display mb-4 group-hover:gradient-text transition-all">
                {article.data.title}
              </h3>
              
              <p class="text-text-secondary mb-6 leading-relaxed line-clamp-3">
                {article.data.description}
              </p>

              <a 
                href={`/blog/${article.slug}`}
                class="inline-flex items-center gap-3 px-6 py-3 gradient-bg rounded-full hover:opacity-90 transition-all text-sm font-medium group/btn glow-hover"
              >
                Read more
                <div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center group-hover/btn:translate-x-1 transition-transform">
                  <i class="fa-solid fa-arrow-right text-xs"></i>
                </div>
              </a>
            </article>
          ))}
        </div>
      )}
    </div>
  </main>
</BaseLayout>

<style>
  .article-card {
    opacity: 0;
    animation: fadeInUp 0.6s ease-out forwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
